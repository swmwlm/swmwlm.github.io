
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>MySQL数据库存储过程动态表建立 - Topking's Blog</title>
  <meta name="author" content="Topking">

  
  <meta name="description" content="MySQL数据库存储过程动态表建立">
  <meta name="keywords" content="create procedure, 创建存储过程临时表">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://swmwlm.github.io/blog/2015/12/25/mysql-procedure/">
  <link href="/favicon.ico" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Topking's Blog" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//libs.baidu.com/jquery/1.9.1/jquery.min.js"></script>

  <!--点击图片弹出层-->
  <script src="/javascripts/libs/jquery-ui.js"></script>
  <link href="/stylesheets/jquery-ui.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/imgpop.js"></script>

  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" />
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>

  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<!--删除Google font-->
<!-- <link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css"> -->

<!-- 设置链接在新窗口打开 -->
<script>
  function addBlankTargetForLinks () {
    $('a[href^="http"]').each(function(){
      $(this).attr('target', '_blank');
    });
  }
  $(document).bind('DOMNodeInserted', function(event) {
    addBlankTargetForLinks();
  });
</script>

<!-- 展示图片 -->
<script type="text/javascript">
//jQuery.noConflict(); // ender.js conflicts with jQuery
</script>

<script language="Javascript" type="text/javascript">
// ender.js gobbles jQuery's ready event: Use ender.js $ instead
$(document).ready(function() {
    jQuery(".fancybox").fancybox();
});
</script>
  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1></h1>
  <div>
  	<a style="font-size: 2.2em;color: #F2F2F2;text-decoration: none;" href="/">Topking's Blog</a>
	  
	    <h2>Seize the day, enjoy my life!</h2>
	  
  </div>
  
</hgroup>

</header>
<!--   <div id="banner_img"></div> -->
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.baidu.com" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="swmwlm.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <!-- <li><a href="/blog/categories/projecmanagementtools">ProjecManagementTools</a></li> -->
  <li><a href="/aboutme">AboutMe</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h2 class="entry-title">MySQL数据库存储过程动态表建立</h2>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2015-12-25T14:28:58+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>25</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>2:28 pm</span></time>
        
        
            | <a href="#comments">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><h2>1. 存储过程简介</h2>

<p>　　我们常用的操作数据库语言SQL语句在执行的时候需要要先编译，然后执行，而存储过程（Stored Procedure）是一组为了完成特定功能的SQL语句集，经编译后存储在数据库中，用户通过指定存储过程的名字并给定参数（如果该存储过程带有参数）来调用执行它。</p>

<!--more-->


<p>　　一个存储过程是一个可编程的函数，它在数据库中创建并保存。它可以有SQL语句和一些特殊的控制结构组成。当希望在不同的应用程序或平台上执行相同的函数，或者封装特定功能时，存储过程是非常有用的。数据库中的存储过程可以看做是对编程中面向对象方法的模拟。它允许控制数据的访问方式。</p>

<p>　　存储过程通常有以下优点：</p>

<p>　　　　(1).存储过程增强了SQL语言的功能和灵活性。存储过程可以用流控制语句编写，有很强的灵活性，可以完成复杂的判断和较复杂的运算。</p>

<p>　　　　(2).存储过程允许标准组件是编程。存储过程被创建后，可以在程序中被多次调用，而不必重新编写该存储过程的SQL语句。而且数据库专业人员可以随时对存储过程进行修改，对应用程序源代码毫无影响。</p>

<p>　　　　(3).存储过程能实现较快的执行速度。如果某一操作包含大量的Transaction-SQL代码或分别被多次执行，那么存储过程要比批处理的执行速度快很多。因为存储过程是预编译的。在首次运行一个存储过程时查询，优化器对其进行分析优化，并且给出最终被存储在系统表中的执行计划。而批处理的Transaction-SQL语句在每次运行时都要进行编译和优化，速度相对要慢一些。</p>

<p>　　　　(4).存储过程能过减少网络流量。针对同一个数据库对象的操作（如查询、修改），如果这一操作所涉及的Transaction-SQL语句被组织程存储过程，那么当在客户计算机上调用该存储过程时，网络中传送的只是该调用语句，从而大大增加了网络流量并降低了网络负载。</p>

<p>　　　　(5).存储过程可被作为一种安全机制来充分利用。系统管理员通过执行某一存储过程的权限进行限制，能够实现对相应的数据的访问权限的限制，避免了非授权用户对数据的访问，保证了数据的安全。</p>

<h2>2. 关于MySQL的存储过程</h2>

<p>　　存储过程是数据库存储的一个重要的功能，但是MySQL在5.0以前并不支持存储过程，这使得MySQL在应用上大打折扣。好在MySQL 5.0终于开始已经支持存储过程，这样即可以大大提高数据库的处理速度，同时也可以提高数据库编程的灵活性。</p>

<h2>3. MySQL存储过程的创建</h2>

<h3>(1). 格式</h3>

<p>　　MySQL存储过程创建的格式：CREATE PROCEDURE 过程名 ([过程参数[,&hellip;]])
[特性 &hellip;] 过程体</p>

<p>这里先举个例子：</p>

<pre><code>mysql&gt; DELIMITER //  
mysql&gt; CREATE PROCEDURE proc1(OUT s int)  
    -&gt; BEGIN 
    -&gt; SELECT COUNT(*) INTO s FROM user;  
    -&gt; END 
    -&gt; //  
mysql&gt; DELIMITER ; 
</code></pre>

<p>注：（1）这里需要注意的是DELIMITER //和DELIMITER ;两句，DELIMITER是分割符的意思，因为MySQL默认以";&ldquo;为分隔符，如果我们没有声明分割符，那么编译器会把存储过程当成SQL语句进行处理，则存储过程的编译过程会报错，所以要事先用DELIMITER关键字申明当前段分隔符，这样MySQL才会将&rdquo;;&ldquo;当做存储过程中的代码，不会执行这些代码，用完了之后要把分隔符还原。</p>

<p>　　（2）存储过程根据需要可能会有输入、输出、输入输出参数，这里有一个输出参数s，类型是int型，如果有多个参数用",&ldquo;分割开。</p>

<p>　　（3）过程体的开始与结束使用BEGIN与END进行标识。</p>

<p>这样，我们的一个MySQL存储过程就完成了，是不是很容易呢?看不懂也没关系，接下来，我们详细的讲解。</p>

<h3>(2). 声明分割符</h3>

<p>其实，关于声明分割符，上面的注解已经写得很清楚，不需要多说，只是稍微要注意一点的是：如果是用MySQL的Administrator管理工具时，可以直接创建，不再需要声明。</p>

<h3>(3). 参数</h3>

<p>　　MySQL存储过程的参数用在存储过程的定义，共有三种参数类型,IN,OUT,INOUT,形式如：</p>

<pre><code>CREATE PROCEDURE([[IN |OUT |INOUT ] 参数名 数据类形...])
</code></pre>

<p>　　IN 输入参数:表示该参数的值必须在调用存储过程时指定，在存储过程中修改该参数的值不能被返回，为默认值</p>

<p>　　OUT 输出参数:该值可在存储过程内部被改变，并可返回</p>

<p>　　INOUT 输入输出参数:调用时指定，并且可被改变和返回</p>

<h4>Ⅰ. IN参数例子</h4>

<p>创建:</p>

<pre><code>mysql &gt; DELIMITER //  
mysql &gt; CREATE PROCEDURE demo_in_parameter(IN p_in int)  
-&gt; BEGIN   
-&gt; SELECT p_in;   
-&gt; SET p_in=2;   
-&gt; SELECT p_in;   
-&gt; END;   
-&gt; //  
mysql &gt; DELIMITER ; 
</code></pre>

<p>执行结果:</p>

<pre><code>mysql &gt; SET @p_in=1;  
mysql &gt; CALL demo_in_parameter(@p_in);  
+------+  
| p_in |  
+------+  
|   1  |   
+------+  

+------+  
| p_in |  
+------+  
|   2  |   
+------+  

mysql&gt; SELECT @p_in;  
+-------+  
| @p_in |  
+-------+  
|  1    |  
+-------+  
</code></pre>

<p>以上可以看出，p_in虽然在存储过程中被修改，但并不影响@p_id的值</p>

<h4>Ⅱ.OUT参数例子</h4>

<p>创建:</p>

<pre><code>mysql &gt; DELIMITER //  
mysql &gt; CREATE PROCEDURE demo_out_parameter(OUT p_out int)  
-&gt; BEGIN 
-&gt; SELECT p_out;  
-&gt; SET p_out=2;  
-&gt; SELECT p_out;  
-&gt; END;  
-&gt; //  
mysql &gt; DELIMITER ; 
</code></pre>

<p>执行结果:</p>

<pre><code>mysql &gt; SET @p_out=1;  
mysql &gt; CALL sp_demo_out_parameter(@p_out);  
+-------+  
| p_out |   
+-------+  
| NULL  |   
+-------+  

+-------+  
| p_out |  
+-------+  
|   2   |   
+-------+  

mysql&gt; SELECT @p_out;  
+-------+  
| p_out |  
+-------+  
|   2   |  
+-------+  
</code></pre>

<h4>Ⅲ. INOUT参数例子</h4>

<p>创建:</p>

<pre><code>mysql &gt; DELIMITER //   
mysql &gt; CREATE PROCEDURE demo_inout_parameter(INOUT p_inout int)   
-&gt; BEGIN 
-&gt; SELECT p_inout;  
-&gt; SET p_inout=2;  
-&gt; SELECT p_inout;   
-&gt; END;  
-&gt; //   
mysql &gt; DELIMITER ; 
</code></pre>

<p>执行结果:</p>

<pre><code>mysql &gt; SET @p_inout=1;  
mysql &gt; CALL demo_inout_parameter(@p_inout) ;  
+---------+  
| p_inout |  
+---------+  
|    1    |  
+---------+  

+---------+  
| p_inout |   
+---------+  
|    2    |  
+---------+  

mysql &gt; SELECT @p_inout;  
+----------+  
| @p_inout |   
+----------+  
|    2     |  
+----------+ 
</code></pre>

<h3>(4). 变量</h3>

<h4>Ⅰ. 变量定义</h4>

<pre><code>DECLARE variable_name [,variable_name...] datatype [DEFAULT value];
</code></pre>

<p>　　其中，datatype为MySQL的数据类型，如:int, float, date, varchar(length)</p>

<p>　　例如:</p>

<pre><code>DECLARE l_int int unsigned default 4000000;  
DECLARE l_numeric number(8,2) DEFAULT 9.95;  
DECLARE l_date date DEFAULT '1999-12-31';  
DECLARE l_datetime datetime DEFAULT '1999-12-31 23:59:59';  
DECLARE l_varchar varchar(255) DEFAULT 'This will not be padded';   
</code></pre>

<h4>Ⅱ. 变量赋值</h4>

<pre><code>SET 变量名 = 表达式值 [,variable_name = expression ...]
</code></pre>

<h5>Ⅲ. 用户变量</h5>

<p>ⅰ. 在MySQL客户端使用用户变量</p>

<pre><code>mysql &gt; SELECT 'Hello World' into @x;  
mysql &gt; SELECT @x;  
+-------------+  
|   @x        |  
+-------------+  
| Hello World |  
+-------------+  
mysql &gt; SET @y='Goodbye Cruel World';  
mysql &gt; SELECT @y;  
+---------------------+  
|     @y              |  
+---------------------+  
| Goodbye Cruel World |  
+---------------------+  

mysql &gt; SET @z=1+2+3;  
mysql &gt; SELECT @z;  
+------+  
| @z   |  
+------+  
|  6   |  
+------+  
</code></pre>

<p>ⅱ. 在存储过程中使用用户变量</p>

<pre><code>mysql &gt; CREATE PROCEDURE GreetWorld( ) SELECT CONCAT(@greeting,' World');  
mysql &gt; SET @greeting='Hello';  
mysql &gt; CALL GreetWorld( );  
+----------------------------+  
| CONCAT(@greeting,' World') |  
+----------------------------+  
|  Hello World               |  
+----------------------------+  
</code></pre>

<p>ⅲ. 在存储过程间传递全局范围的用户变量</p>

<pre><code>mysql&gt; CREATE PROCEDURE p1()   SET @last_procedure='p1';  
mysql&gt; CREATE PROCEDURE p2() SELECT CONCAT('Last procedure was ',@last_proc);  
mysql&gt; CALL p1( );  
mysql&gt; CALL p2( );  
+-----------------------------------------------+  
| CONCAT('Last procedure was ',@last_proc  |  
+-----------------------------------------------+  
| Last procedure was p1                         |  
+-----------------------------------------------+  
</code></pre>

<p>注意:</p>

<p>①用户变量名一般以@开头</p>

<p>②滥用用户变量会导致程序难以理解及管理</p>

<h3>(5). 注释</h3>

<p>MySQL存储过程可使用两种风格的注释</p>

<p>双模杠：&ndash;</p>

<p>该风格一般用于单行注释</p>

<p>c风格： 一般用于多行注释</p>

<p>例如：</p>

<pre><code>mysql &gt; DELIMITER //  
mysql &gt; CREATE PROCEDURE proc1 --name存储过程名  
-&gt; (IN parameter1 INTEGER)   
-&gt; BEGIN   
-&gt; DECLARE variable1 CHAR(10);   
-&gt; IF parameter1 = 17 THEN   
-&gt; SET variable1 = 'birds';   
-&gt; ELSE 
-&gt; SET variable1 = 'beasts';   
-&gt; END IF;   
-&gt; INSERT INTO table1 VALUES (variable1);  
-&gt; END   
-&gt; //  
mysql &gt; DELIMITER ;  
</code></pre>

<h2>4.MySQL存储过程的调用</h2>

<p>　　用call和你过程名以及一个括号，括号里面根据需要，加入参数，参数包括输入参数、输出参数、输入输出参数。具体的调用方法可以参看上面的例子。</p>

<h2>5.MySQL存储过程的查询</h2>

<p>　　我们像知道一个数据库下面有那些表，我们一般采用show tables;进行查看。那么我们要查看某个数据库下面的存储过程，是否也可以采用呢？答案是，我们可以查看某个数据库下面的存储过程，但是是令一钟方式。</p>

<p>我们可以用</p>

<pre><code>select name from mysql.proc where db=’数据库名’;
</code></pre>

<p>或者</p>

<pre><code>select routine_name from information_schema.routines where routine_schema='数据库名';
</code></pre>

<p>或者</p>

<pre><code>show procedure status where db='数据库名';
</code></pre>

<p>进行查询。</p>

<p>如果我们想知道，某个存储过程的详细，那我们又该怎么做呢？是不是也可以像操作表一样用describe 表名进行查看呢？</p>

<p>答案是：我们可以查看存储过程的详细，但是需要用另一种方法：</p>

<pre><code>SHOW CREATE PROCEDURE 数据库.存储过程名;
</code></pre>

<p>就可以查看当前存储过程的详细。</p>

<h2>6.MySQL存储过程的修改</h2>

<pre><code>ALTER PROCEDURE
</code></pre>

<p>更改用CREATE PROCEDURE 建立的预先指定的存储过程，其不会影响相关存储过程或存储功能。</p>

<h2>7.MySQL存储过程的删除</h2>

<p>删除一个存储过程比较简单，和删除表一样：</p>

<pre><code>DROP PROCEDURE
</code></pre>

<p>从MySQL的表格中删除一个或多个存储过程。</p>

<h2>8.MySQL存储过程的控制语句</h2>

<h3>(1). 变量作用域</h3>

<p>　　内部的变量在其作用域范围内享有更高的优先权，当执行到end。变量时，内部变量消失，此时已经在其作用域外，变量不再可见了，应为在存储
过程外再也不能找到这个申明的变量，但是你可以通过out参数或者将其值指派
给会话变量来保存其值。</p>

<pre><code>mysql &gt; DELIMITER //  
mysql &gt; CREATE PROCEDURE proc3()  
     -&gt; begin 
     -&gt; declare x1 varchar(5) default 'outer';  
     -&gt; begin 
     -&gt; declare x1 varchar(5) default 'inner';  
     -&gt; select x1;  
     -&gt; end;  
     -&gt; select x1;  
     -&gt; end;  
     -&gt; //  
mysql &gt; DELIMITER ;  
</code></pre>

<h3>(2). 条件语句</h3>

<h4>Ⅰ. if-then -else语句</h4>

<pre><code>mysql &gt; DELIMITER //  
mysql &gt; CREATE PROCEDURE proc2(IN parameter int)  
     -&gt; begin 
     -&gt; declare var int;  
     -&gt; set var=parameter+1;  
     -&gt; if var=0 then 
     -&gt; insert into t values(17);  
     -&gt; end if;  
     -&gt; if parameter=0 then 
     -&gt; update t set s1=s1+1;  
     -&gt; else 
     -&gt; update t set s1=s1+2;  
     -&gt; end if;  
     -&gt; end;  
     -&gt; //  
mysql &gt; DELIMITER ;  
</code></pre>

<h4>Ⅱ. case语句：</h4>

<pre><code>mysql &gt; DELIMITER //  
mysql &gt; CREATE PROCEDURE proc3 (in parameter int)  
     -&gt; begin 
     -&gt; declare var int;  
     -&gt; set var=parameter+1;  
     -&gt; case var  
     -&gt; when 0 then   
     -&gt; insert into t values(17);  
     -&gt; when 1 then   
     -&gt; insert into t values(18);  
     -&gt; else   
     -&gt; insert into t values(19);  
     -&gt; end case;  
     -&gt; end;  
     -&gt; //  
mysql &gt; DELIMITER ; 
</code></pre>

<h3>(3). 循环语句</h3>

<h4>Ⅰ. while ···· end while：</h4>

<pre><code>mysql &gt; DELIMITER //  
mysql &gt; CREATE PROCEDURE proc4()  
     -&gt; begin 
     -&gt; declare var int;  
     -&gt; set var=0;  
     -&gt; while var&lt;6 do  
     -&gt; insert into t values(var);  
     -&gt; set var=var+1;  
     -&gt; end while;  
     -&gt; end;  
     -&gt; //  
mysql &gt; DELIMITER ; 
</code></pre>

<h4>Ⅱ. repeat···· end repeat：</h4>

<p>它在执行操作后检查结果，而while则是执行前进行检查。</p>

<pre><code>mysql &gt; DELIMITER //  
mysql &gt; CREATE PROCEDURE proc5 ()  
     -&gt; begin   
     -&gt; declare v int;  
     -&gt; set v=0;  
     -&gt; repeat  
     -&gt; insert into t values(v);  
     -&gt; set v=v+1;  
     -&gt; until v&gt;=5  
     -&gt; end repeat;  
     -&gt; end;  
     -&gt; //  
mysql &gt; DELIMITER ;  
</code></pre>

<h4>Ⅲ. loop ·····end loop:</h4>

<p>　　loop循环不需要初始条件，这点和while 循环相似，同时和repeat循环一样不需要结束条件, leave语句的意义是离开循环。</p>

<pre><code>mysql &gt; DELIMITER //  
mysql &gt; CREATE PROCEDURE proc6 ()  
     -&gt; begin 
     -&gt; declare v int;  
     -&gt; set v=0;  
     -&gt; LOOP_LABLE:loop  
     -&gt; insert into t values(v);  
     -&gt; set v=v+1;  
     -&gt; if v &gt;=5 then 
     -&gt; leave LOOP_LABLE;  
     -&gt; end if;  
     -&gt; end loop;  
     -&gt; end;  
     -&gt; //  
mysql &gt; DELIMITER ;  
</code></pre>

<h4>Ⅳ. LABLES 标号：</h4>

<p>　　标号可以用在begin repeat while 或者loop 语句前，语句标号只能在合法的语句前面使用。可以跳出循环，使运行指令达到复合语句的最后一步。</p>

<h3>(4). ITERATE迭代</h3>

<h4>Ⅰ. ITERATE:</h4>

<p>　　通过引用复合语句的标号,来从新开始复合语句</p>

<pre><code>mysql &gt; DELIMITER //  
mysql &gt; CREATE PROCEDURE proc10 ()  
     -&gt; begin 
     -&gt; declare v int;  
     -&gt; set v=0;  
     -&gt; LOOP_LABLE:loop  
     -&gt; if v=3 then   
     -&gt; set v=v+1;  
     -&gt; ITERATE LOOP_LABLE;  
     -&gt; end if;  
     -&gt; insert into t values(v);  
     -&gt; set v=v+1;  
     -&gt; if v&gt;=5 then 
     -&gt; leave LOOP_LABLE;  
     -&gt; end if;  
     -&gt; end loop;  
     -&gt; end;  
     -&gt; //  
mysql &gt; DELIMITER ; 
</code></pre>

<h2>10.MySQL存储过程动态表建立(PREPARE)</h2>

<ol>
<li>PREPARE  statement_name  FROM  sql_text /<em>定义</em>/</li>
<li>EXECUTE  statement_name [USING variable [,variable&hellip;]] /<em>执行预处理语句</em>/</li>
<li>DEALLOCATE   PREPARE  statement_name /<em>删除定义</em>/</li>
</ol>


<p>参考示例：</p>

<pre><code>DELIMITER $$
DROP PROCEDURE IF EXISTS `gpsdata`.`sp_test`$$
CREATE DEFINER=`root`@`localhost` PROCEDURE `sp_test`(
  gpstime_ varchar(128),
  gpsname_ varchar(128),
  gpsinfo_ varchar(256)
)
BEGIN
DECLARE tbname varchar(50) DEFAULT  '0';
DECLARE v_sql varchar(1024) DEFAULT '0';

SET v_sql=CONCAT('select * from  ', tbname ,' where gpsname = ',gpsname_,'  order by gpstime desc limit 1');


SET @lastdata = v_sql;
PREPARE lastdata FROM @lastdata;   
EXECUTE lastdata;
DEALLOCATE PREPARE lastdata;  

select v_sql;

END$$

DELIMITER ;
</code></pre>

<p>使用 PREPARE 的几个注意点：</p>

<p>　　A： PREPARE stmt_name FROM preparable_stmt;</p>

<p> 预定义一个语句，并将它赋给 stmt_name ，stmt_name 是不区分大小写的。</p>

<p>　　B： 即使 preparable_stmt 语句中的 ? 所代表的是一个字符串，你也不需要将 ? 用引号包含起来。</p>

<p>　　C： 如果新的 PREPARE 语句使用了一个已存在的 stmt_name ，那么原有的将被立即释放！
 即使这个新的 PREPARE 语句因为错误而不能被正确执行。</p>

<p>　　D： PREPARE stmt_name 的作用域是当前客户端连接会话可见。</p>

<p>　　E： 要释放一个预定义语句的资源，可以使用 DEALLOCATE PREPARE 句法。</p>

<p>　　F： EXECUTE stmt_name 句法中，如果 stmt_name 不存在，将会引发一个错误。</p>

<p>　　G： 如果在终止客户端连接会话时，没有显式地调用 DEALLOCATE PREPARE 句法释放资源，服务器端会自己动释放它。</p>

<p>　　H：在预定义语句中，CREATE TABLE, DELETE, DO, INSERT, REPLACE, SELECT, SET, UPDATE, 和大部分的 SHOW 句法被支持。</p>

<p>　　I：PREPARE 语句不可以用于存储过程(5.0以上可以使用)，自定义函数！但从 MySQL 5.0.13 开始，它可以被用于存储过程，仍不支持在函数中使用！</p>

<h2>11.MySQL存储过程动态创建临时表</h2>

<figure class='code'><figcaption><span>案例应用</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
</pre></td><td class='code'><pre><code class='mysql'><span class='line'><span class="k">drop</span> <span class="k">procedure</span> <span class="k">if</span> <span class="k">exists</span> <span class="n">proc_user_center_message</span><span class="p">;</span>
</span><span class='line'><span class="c1">-- 创建存储过程</span>
</span><span class='line'>
</span><span class='line'><span class="k">drop</span> <span class="k">procedure</span> <span class="k">if</span> <span class="k">exists</span> <span class="n">proc_user_center_message</span><span class="p">;</span>
</span><span class='line'><span class="c1">-- 创建存储过程</span>
</span><span class='line'><span class="k">create</span> <span class="k">procedure</span> <span class="nf">proc_user_center_message</span><span class="p">(</span><span class="k">in</span> <span class="n">userAccount</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">40</span><span class="p">),</span><span class="k">in</span> <span class="n">investor</span> <span class="kt">int</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="k">in</span> <span class="n">projectCreator</span> <span class="kt">int</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span><span class="k">in</span> <span class="n">startRecord</span> <span class="kt">int</span><span class="p">(</span><span class="mi">6</span><span class="p">),</span><span class="k">in</span> <span class="n">recordCount</span> <span class="kt">int</span><span class="p">(</span><span class="mi">6</span><span class="p">))</span>
</span><span class='line'><span class="n">begin</span>
</span><span class='line'>  <span class="k">declare</span> <span class="n">dynamic_sql</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
</span><span class='line'>  <span class="c1">-- 创建临时表</span>
</span><span class='line'>  <span class="k">drop</span> <span class="n">temporary</span> <span class="k">table</span> <span class="k">if</span> <span class="k">exists</span> <span class="n">tmp_message</span><span class="p">;</span>
</span><span class='line'>  <span class="k">create</span> <span class="n">temporary</span> <span class="k">table</span> <span class="nf">tmp_message</span> <span class="p">(</span>
</span><span class='line'>        <span class="n">id</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
</span><span class='line'>        <span class="n">title</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="p">,</span>
</span><span class='line'>        <span class="n">content</span> <span class="kt">text</span><span class="p">,</span>
</span><span class='line'>        <span class="n">created_time</span> <span class="kt">timestamp</span><span class="p">,</span>
</span><span class='line'>        <span class="n">type</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span>
</span><span class='line'>        <span class="n">receiver</span> <span class="kt">varchar</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>
</span><span class='line'>    <span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">-- 运营推送消息</span>
</span><span class='line'>  <span class="kt">set</span> <span class="n">dynamic_sql</span> <span class="o">=</span> <span class="s1">&#39;insert into tmp_message(id,title,content,created_time,type,receiver)</span>
</span><span class='line'><span class="s1"> select t.spe_id as id,t.spe_title as title,t.spe_img as content,t.spe_createtime as created_time,1 as type,t.receive_type as receiver</span>
</span><span class='line'><span class="s1"> from oneZc_special_tem t </span>
</span><span class='line'><span class="s1"> where t.category = 3 and t.receive_type is not null&#39;</span><span class="p">;</span>
</span><span class='line'>  <span class="kt">set</span> <span class="o">@</span><span class="n">dynamic_sql</span><span class="o">=</span><span class="n">dynamic_sql</span><span class="p">;</span>
</span><span class='line'>  <span class="n">prepare</span> <span class="n">stmt</span> <span class="k">from</span> <span class="o">@</span><span class="n">dynamic_sql</span><span class="p">;</span>
</span><span class='line'>  <span class="n">execute</span> <span class="n">stmt</span><span class="p">;</span>
</span><span class='line'>  <span class="n">deallocate</span> <span class="n">prepare</span> <span class="n">stmt</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">-- 系统消息</span>
</span><span class='line'>  <span class="kt">set</span> <span class="n">dynamic_sql</span> <span class="o">=</span> <span class="s1">&#39;insert into tmp_message(id,title,content,created_time,type,receiver)</span>
</span><span class='line'><span class="s1"> select message_id as id,null as title,t.message_content as content,t.message_createtime as created_time,t.message_type as type,t.user_account as receiver</span>
</span><span class='line'><span class="s1"> from oneZc_message_tem t</span>
</span><span class='line'><span class="s1"> where message_status = &#39;&#39;1&#39;&#39;&#39;</span><span class="p">;</span>
</span><span class='line'>  <span class="kt">set</span> <span class="o">@</span><span class="n">dynamic_sql</span><span class="o">=</span><span class="n">dynamic_sql</span><span class="p">;</span>
</span><span class='line'>  <span class="n">prepare</span> <span class="n">stmt</span> <span class="k">from</span> <span class="o">@</span><span class="n">dynamic_sql</span><span class="p">;</span>
</span><span class='line'>  <span class="n">execute</span> <span class="n">stmt</span><span class="p">;</span>
</span><span class='line'>  <span class="n">deallocate</span> <span class="n">prepare</span> <span class="n">stmt</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">-- note</span>
</span><span class='line'>  <span class="kt">set</span> <span class="n">dynamic_sql</span> <span class="o">=</span> <span class="s1">&#39;insert into tmp_message(id,title,content,created_time,type,receiver)</span>
</span><span class='line'><span class="s1"> select id as id,null as title,t.note as content,t.created_time as created_time,4 as type,t.scope as receiver </span>
</span><span class='line'><span class="s1"> from oneZc_note_tem t&#39;</span><span class="p">;</span>
</span><span class='line'>  <span class="kt">set</span> <span class="o">@</span><span class="n">dynamic_sql</span><span class="o">=</span><span class="n">dynamic_sql</span><span class="p">;</span>
</span><span class='line'>  <span class="n">prepare</span> <span class="n">stmt</span> <span class="k">from</span> <span class="o">@</span><span class="n">dynamic_sql</span><span class="p">;</span>
</span><span class='line'>  <span class="n">execute</span> <span class="n">stmt</span><span class="p">;</span>
</span><span class='line'>  <span class="n">deallocate</span> <span class="n">prepare</span> <span class="n">stmt</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c1">-- vote</span>
</span><span class='line'>  <span class="kt">set</span> <span class="n">dynamic_sql</span> <span class="o">=</span> <span class="s1">&#39;insert into tmp_message(id,title,content,created_time,type,receiver)</span>
</span><span class='line'><span class="s1"> select id as id,t.title as title,&#39;&#39;有新的投票事务&#39;&#39; as content,t.created_time as created_time,2 as type,</span>
</span><span class='line'><span class="s1"> (select GROUP_CONCAT(distinct ts.user_account separator &#39;&#39;,&#39;&#39;) from zc_investment ts where ts.pro_id = t.project_id and ts.inv_state = 1) as receiver</span>
</span><span class='line'><span class="s1"> from oneZc_vote_tem t&#39;</span><span class="p">;</span>
</span><span class='line'>  <span class="kt">set</span> <span class="o">@</span><span class="n">dynamic_sql</span><span class="o">=</span><span class="n">dynamic_sql</span><span class="p">;</span>
</span><span class='line'>  <span class="n">prepare</span> <span class="n">stmt</span> <span class="k">from</span> <span class="o">@</span><span class="n">dynamic_sql</span><span class="p">;</span>
</span><span class='line'>  <span class="n">execute</span> <span class="n">stmt</span><span class="p">;</span>
</span><span class='line'>  <span class="n">deallocate</span> <span class="n">prepare</span> <span class="n">stmt</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="kt">set</span> <span class="n">dynamic_sql</span><span class="o">=</span> <span class="s1">&#39;select id,title,content,created_time,type from tmp_message where (receiver = &#39;&#39;ALL_USER&#39;&#39;&#39;</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">IF</span> <span class="n">investor</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'>  <span class="k">THEN</span>
</span><span class='line'>      <span class="kt">set</span> <span class="n">dynamic_sql</span> <span class="o">=</span> <span class="nf">concat</span><span class="p">(</span><span class="n">dynamic_sql</span><span class="p">,</span><span class="s1">&#39; or receiver = &#39;&#39;INVESTOR&#39;&#39;&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="n">END</span> <span class="k">IF</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">IF</span> <span class="n">projectCreator</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'>  <span class="k">THEN</span>
</span><span class='line'>      <span class="kt">set</span> <span class="n">dynamic_sql</span> <span class="o">=</span> <span class="nf">concat</span><span class="p">(</span><span class="n">dynamic_sql</span><span class="p">,</span><span class="s1">&#39; or receiver = &#39;&#39;PROJECT_CREATOR&#39;&#39;&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="n">END</span> <span class="k">IF</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">IF</span> <span class="n">userAccount</span> <span class="k">is</span> <span class="k">not</span> <span class="no">null</span>
</span><span class='line'>  <span class="k">THEN</span>
</span><span class='line'>      <span class="kt">set</span> <span class="n">dynamic_sql</span> <span class="o">=</span> <span class="nf">concat</span><span class="p">(</span><span class="n">dynamic_sql</span><span class="p">,</span><span class="s1">&#39; or receiver like &#39;&#39;%&#39;</span><span class="p">,</span><span class="n">userAccount</span><span class="p">,</span><span class="s1">&#39;%&#39;&#39;&#39;</span><span class="p">);</span>
</span><span class='line'>  <span class="n">END</span> <span class="k">IF</span><span class="p">;</span>
</span><span class='line'>  <span class="kt">set</span> <span class="n">dynamic_sql</span> <span class="o">=</span> <span class="nf">concat</span><span class="p">(</span><span class="n">dynamic_sql</span><span class="p">,</span><span class="s1">&#39;)&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="kt">set</span> <span class="n">dynamic_sql</span> <span class="o">=</span> <span class="nf">concat</span><span class="p">(</span><span class="n">dynamic_sql</span><span class="p">,</span><span class="s1">&#39; order by created_time desc&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">IF</span> <span class="n">startRecord</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span> <span class="n">recordCount</span> <span class="o">&gt;=</span> <span class="mi">0</span>
</span><span class='line'>  <span class="k">THEN</span>
</span><span class='line'>      <span class="kt">set</span> <span class="n">dynamic_sql</span> <span class="o">=</span> <span class="nf">concat</span><span class="p">(</span><span class="n">dynamic_sql</span><span class="p">,</span><span class="s1">&#39; limit &#39;</span><span class="p">,</span><span class="n">startRecord</span><span class="p">,</span><span class="s1">&#39;,&#39;</span><span class="p">,</span><span class="n">recordCount</span><span class="p">);</span>
</span><span class='line'>  <span class="n">END</span> <span class="k">IF</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  <span class="kt">set</span> <span class="o">@</span><span class="n">dynamic_sql</span><span class="o">=</span><span class="n">dynamic_sql</span><span class="p">;</span>
</span><span class='line'>  <span class="n">prepare</span> <span class="n">stmt</span> <span class="k">from</span> <span class="o">@</span><span class="n">dynamic_sql</span><span class="p">;</span>
</span><span class='line'>  <span class="n">execute</span> <span class="n">stmt</span><span class="p">;</span>
</span><span class='line'>  <span class="n">deallocate</span> <span class="n">prepare</span> <span class="n">stmt</span><span class="p">;</span>    
</span><span class='line'>
</span><span class='line'><span class="n">end</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


</div>



  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Topking</span></span>

      




<time class='entry-date' datetime='2015-12-25T14:28:58+08:00'><span class='date'><span class='date-month'>Dec</span> <span class='date-day'>25</span><span class='date-suffix'>th</span>, <span class='date-year'>2015</span></span> <span class='time'>2:28 pm</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/mysql/'>mysql</a>
  
</span>


      

<span class="tags">
  
    <a class='tag' href='/tags/mysql/'>mysql</a>, <a class='tag' href='/tags/procedure/'>procedure</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
  
    <!-- JiaThis Button BEGIN -->
<div class="jiathis_style_24x24">
	<a class="jiathis_button_qzone"></a>
	<a class="jiathis_button_tsina"></a>
	<a class="jiathis_button_tqq"></a>
	<a class="jiathis_button_weixin"></a>
	<a class="jiathis_button_renren"></a>
	<a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jtico jtico_jiathis" target="_blank"></a>
	<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2015/12/18/chocolatey/" title="Previous Post: 利用Chocolatey快速在Windows下搭建一个开发环境">&laquo; 利用Chocolatey快速在Windows下搭建一个开发环境</a>
      
      
        <a class="basic-alignment right" href="/blog/2015/12/30/ajax-backspace/" title="Next Post: ajax分页时，点击第N页链接，回退会返回第一页解决方法">ajax分页时，点击第N页链接，回退会返回第一页解决方法 &raquo;</a>
      
    </p>
  </footer>
</article>


  <section>
    <h1>Comments</h1>
    <div id="comments" aria-live="polite"><!-- 多说评论框 start -->
	<div class="ds-thread" data-thread-key="/blog/2015/12/25/mysql-procedure" data-title="MySQL数据库存储过程动态表建立" data-url="http://swmwlm.github.io/blog/2015/12/25/mysql-procedure/"></div>
<!-- 多说评论框 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"swmwlm"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end --></div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Bo main introduction</h1>
  <ul id="myprofile">
      <li>
        Omitted here a million words...
      </li>
  </ul>
</section><section>
  <h1>Sina Weibo</h1>
  <ul id="weibo">
      <li>
        <!-- 在此插入获得的微博秀代码 -->
    	<iframe width="100%" height="120" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=120&fansRow=2&ptype=1&speed=0&skin=2&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=3243057067&verifier=cf37004f&dpc=1"></iframe>
      </li>
  </ul>
</section><section>
<h1>Tag Cloud</h1>
    <!-- <span id="Tag-cloud"><li><a style="font-size: 100%" href="/tags/git/">Git</a></li>
<li><a style="font-size: 100%" href="/tags/linux/">Linux</a></li>
<li><a style="font-size: 100%" href="/tags/octopress/">OctoPress</a></li>
<li><a style="font-size: 100%" href="/tags/seo/">SEO</a></li>
<li><a style="font-size: 100%" href="/tags/windows/">Windows</a></li>
<li><a style="font-size: 100%" href="/tags/ajax/">ajax</a></li>
<li><a style="font-size: 100%" href="/tags/chocolatey/">chocolatey</a></li>
<li><a style="font-size: 100%" href="/tags/idea/">idea</a></li>
<li><a style="font-size: 100%" href="/tags/kkpager/">kkpager</a></li>
<li><a style="font-size: 100%" href="/tags/mysql/">mysql</a></li>
<li><a style="font-size: 100%" href="/tags/octopress/">octopress</a></li>
<li><a style="font-size: 100%" href="/tags/procedure/">procedure</a></li>
<li><a style="font-size: 100%" href="/tags/windows/">windows</a></li>
</span> -->
    <span id="Tag-cloud"><a style="font-size: 100%" href="/tags/git/">Git</a>
<a style="font-size: 100%" href="/tags/linux/">Linux</a>
<a style="font-size: 100%" href="/tags/octopress/">OctoPress</a>
<a style="font-size: 100%" href="/tags/seo/">SEO</a>
<a style="font-size: 100%" href="/tags/windows/">Windows</a>
<a style="font-size: 100%" href="/tags/ajax/">ajax</a>
<a style="font-size: 100%" href="/tags/chocolatey/">chocolatey</a>
<a style="font-size: 100%" href="/tags/idea/">idea</a>
<a style="font-size: 100%" href="/tags/kkpager/">kkpager</a>
<a style="font-size: 100%" href="/tags/mysql/">mysql</a>
<a style="font-size: 100%" href="/tags/octopress/">octopress</a>
<a style="font-size: 100%" href="/tags/procedure/">procedure</a>
<a style="font-size: 100%" href="/tags/windows/">windows</a>
</span>
</ul>
</section>
<section>
  <h1>Category Cloud</h1>
    <span id="category-tag-cloud"><a href='/blog/categories/ajax' style='font-size: 130.0%'>Ajax(1)</a> <a href='/blog/categories/git' style='font-size: 130.0%'>Git(1)</a> <a href='/blog/categories/java' style='font-size: 160.0%'>Java(2)</a> <a href='/blog/categories/linux' style='font-size: 160.0%'>Linux(2)</a> <a href='/blog/categories/mysql' style='font-size: 130.0%'>Mysql(1)</a> <a href='/blog/categories/octopress' style='font-size: 130.0%'>Octopress(1)</a> <a href='/blog/categories/windows' style='font-size: 160.0%'>Windows(2)</a> </span>
</section>
<section>
  <h1>Top Categories</h1>
    <ul id="top-category-list"><li><a href='/blog/categories/linux'>Linux (2)</a></li><li><a href='/blog/categories/java'>Java (2)</a></li><li><a href='/blog/categories/windows'>Windows (2)</a></li><li><a href='/blog/categories/octopress'>Octopress (1)</a></li><li><a href='/blog/categories/git'>Git (1)</a></li><li><a href='/blog/categories/mysql'>Mysql (1)</a></li><li><a href='/blog/categories/ajax'>Ajax (1)</a></li></ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/12/30/ajax-backspace/">ajax分页时，点击第N页链接，回退会返回第一页解决方法</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/12/25/mysql-procedure/">MySQL数据库存储过程动态表建立</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/12/18/chocolatey/">利用Chocolatey快速在Windows下搭建一个开发环境</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/12/17/git/">Git命令</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/12/12/linuxgroup/">Linux下新增修改删除查看用户和用户组</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/swmwlm">@swmwlm</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'swmwlm',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>

<section>
<h1>Blog Href</h1>
<ul>
        <li>
        <a href="http://812lcl.com//">812lcl的博客</a>
        </li>
        <li>
        <a href="http://www.csdn.net/">CSDN</a>
        </li>
        <li>
        <a href="http://www.cnblogs.com/">博客园</a>
        </li>
        <li>
        <a href="http://coolshell.cn/">酷壳CoolShell</a>
        </li>
        <li>
        <a href="http://www.cnblogs.com/Solstice/">陈硕</a>
        </li>
</ul>
</section>




  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - Topking -
  <span class="credit">Powered by <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1256815831'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s11.cnzz.com/z_stat.php%3Fid%3D1256815831%26online%3D1%26show%3Dline' type='text/javascript'%3E%3C/script%3E"));</script></span>
</p>
<div id="full" style="width:0px; height:0px; position:fixed; right:180px; bottom:150px; z-index:100; text-align:center; background-color:transparent; cursor:pointer;">
        <a href="#" onclick="goTop();return false;"><img src="/images/top.png" border=0 alt="返回顶部"></a>
</div>
<script src="/javascripts/top.js" type="text/javascript"></script>
</footer>
  






<!-- 
 -->



</body>
</html>
